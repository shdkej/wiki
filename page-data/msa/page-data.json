{"componentChunkName":"component---src-templates-blog-post-js","path":"/msa/","result":{"data":{"site":{"siteMetadata":{"title":"SH"}},"markdownRemark":{"id":"a06c64a8-27c4-5172-a50a-600ccf513c8f","excerpt":"Micro Service Architecture MSA 는 작은 규모에서는 과한 느낌이 있다\n모놀리스로 쉽게 관리가 될 것을 MSA를 사용하면 관리포인트가 엄청 많아진다 micro service every node make end-point, http, grpc need…","html":"<h1 id=\"micro-service-architecture\" style=\"position:relative;\"><a href=\"#micro-service-architecture\" aria-label=\"micro service architecture permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Micro Service Architecture</h1>\n<p>MSA 는 작은 규모에서는 과한 느낌이 있다\n모놀리스로 쉽게 관리가 될 것을 MSA를 사용하면 관리포인트가 엄청 많아진다</p>\n<h2 id=\"micro-service\" style=\"position:relative;\"><a href=\"#micro-service\" aria-label=\"micro service permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>micro service</h2>\n<ul>\n<li>every node make end-point, http, grpc\n<ul>\n<li>need documentation</li>\n</ul>\n</li>\n<li>flexible micro service\n<ul>\n<li>it can be split and compose</li>\n</ul>\n</li>\n<li>logging and visualization</li>\n<li>마이크로서비스에서 문제가 생긴 지점을 바로 확인할 방법은?</li>\n</ul>\n<h4 id=\"마이크로-서비스\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EC%9D%B4%ED%81%AC%EB%A1%9C-%EC%84%9C%EB%B9%84%EC%8A%A4\" aria-label=\"마이크로 서비스 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>마이크로 서비스</h4>\n<p>라이브러리를 쓰듯이 다른 서비스들을 사용하면 성능 상의 손해가 있다\n마이크로아키텍처는 관리할 지점이 늘어나는 단점이 있지 않나</p>\n<ul>\n<li>\n<p>메시지 기반의 비동기 통신</p>\n</li>\n<li>\n<p>사가 패턴 - 데이터 일관성 유지를 위해</p>\n</li>\n<li>\n<p>도메인 주도 설계</p>\n</li>\n<li>\n<p>이벤트 소싱 패턴</p>\n</li>\n<li>\n<p>API</p>\n</li>\n<li>\n<p>서비스 메시</p>\n</li>\n<li>\n<p>서비스 디스커버리</p>\n</li>\n<li>\n<p>메시지 처리</p>\n</li>\n<li>\n<p>서킷 브레이커</p>\n</li>\n<li>\n<p>API gateway, 서비스 메시, 서비스 디스커버리 차이는?</p>\n<ul>\n<li>서비스 메시 안에 서비스 디스커버리가 보통 내장되있다</li>\n<li>api gateway는 외부에서의 접속, 서비스 메시는 내부의 네트워크 관리</li>\n</ul>\n</li>\n</ul>\n<p>왜 마이크로 서비스인가</p>\n<ul>\n<li>\n<p>마이크로 서비스를 위해서는 필연적으로 서비스 간 커뮤니케이션이 필요하고,\n비동기 통신과 동기 통신을 잘 구분해서 사용해야 한다.</p>\n<ul>\n<li>동기는 API를 이용해서, 비동기는 메시지 큐를 이용해서.</li>\n<li>각 서비스 간 데이터를 메시지 큐에 발행하고 구독하는 식으로 데이터 공유,\n이벤트 처리가 가능하다.</li>\n</ul>\n</li>\n<li>\n<p>마이크로 서비스를 일일이 관리하기 보다 서비스 디스커버리를 이용해서 자유롭게\n생성과 운영이 되게 해야겠다</p>\n</li>\n<li>\n<p>단일고장점이 없도록 노드를 여러 개 두어 관리하는 것이 좋겠다.</p>\n</li>\n<li>\n<p>큰 팀을 작은 팀으로 나누면 팀 간 대화에 장벽이 생기고, 안개가 생긴다. 다른\n팀의 영역에는 안들어가려고 하고, 그 쪽에서 일어난 일이 전달이 안될 때가\n많아진다. 어떻게 이 장벽을 없앨 수 있을까</p>\n</li>\n<li>\n<p>핵가족에 이어 1인가구가 늘어남에 따라 대가족일 때는 자연스럽게 알 수 있던\n것들이 이제는 공부를 해야 알 수 있게 되었다.</p>\n</li>\n<li>\n<p>수평적인 연결망이 만들어져서 정보공유를 할 수 있게 해야한다. 회사에서 팀장이\n있고 팀장회의를 하는 것과 비슷한 느낌이지만 수평적인 관계의 연결망으로.\n(현재의 커뮤니티가 이 역할을 하고 있는 것일까? Web 2.0)</p>\n</li>\n</ul>\n<h4 id=\"마이크로서비스\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EC%9D%B4%ED%81%AC%EB%A1%9C%EC%84%9C%EB%B9%84%EC%8A%A4\" aria-label=\"마이크로서비스 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>마이크로서비스</h4>\n<p>포인트</p>\n<ul>\n<li>단일 고장 지점을 없앤다</li>\n<li>의존 영역을 분리한다</li>\n<li>빠르고 가벼운 사이즈를 유지한다</li>\n</ul>\n<p>이를 어렵게 하는 요소</p>\n<ul>\n<li>API endpoint가 많아져서 이를 일일이 관리하기 힘들어 API Gateway라는 것을 이용하려 하는데 이 API gateway가 단일 고장점이 되버린다</li>\n<li>흩어져 있는 데이터 여러개를 합쳐서 사용해야 할 경우가 있다</li>\n<li>처음에는 작은 사이즈지만 요구사항이 늘어남에 따라 사이즈는 필연적으로 커진다.</li>\n</ul>\n<p>이에 대한 마이크로서비스의 대응방법</p>\n<ul>\n<li>sidecar 패턴으로 API gateway를 없애고 각 서비스에 연결점을 붙인다</li>\n<li>SAGA, CQRS</li>\n<li>사이즈가 커지면 다시 분리한다.</li>\n</ul>\n<p>미이크로서비스간 데이터 통합과 작업 일관성 유지를 위해 다른 서비스가 필요한데\n이를 커밋과 적용으로 나누는 방식으로 할 수 있고\n사가 패턴을 이용해 해결할 수도 있다</p>\n<p>쿠버네티스의 구조처럼 마이크로서비스를 구현하면 되지 않을까</p>\n<p>데이터를 다 분리해놓고 중앙에 모아서 처리하다가 요청이 자주 오간다 싶으면\n연결하는 길을 추가?</p>\n<p>한 마이크로서비스의 단위를 로직 - 데이터베이스 - 사이드카로 놓고 사용\n이 마이크로서비스를 관리하는 툴을 생각해본다</p>\n<p>중앙에 데이터들이 하나로 묶인다\n한 마이크로서비스에 요청이 오면 그 응답으로 메시지를 보낸다\n메시지는 중앙, 관리자에게 전달되고, 관리자는 피드백으로 중앙에는 업데이트로\n이용된다</p>\n<p>한 부분의 변화를 위해 다른 부분을 신경 쓰지 않아야 한다.\n한 부분의 변화가 다른 부분에 영향을 주지 않아야 한다.</p>\n<p>kubernetes로 여러개의 서비스로 쪼개면 microservice인가?\nmicro로 서비스를 만들면 microservice인가?\nmonolith와 구분되는 microservice의 특징은 각 서비스가 개별 데이터베이스를 갖는\n것인데, micro는 어떤 구성 방식인가</p>\n<p>어차피 한 사람이 모든 마이크로서비스를 관리할 수 없다?\n그래서 모놀리스에서 서로 엮여있던 것을 마이크로화해서 편하게 관리할 수 있게\n하는거지 마이크로서비스를 무한정 많이 만드는 것이 목적은 아닐 것이다.\n한 사람이 다루는 서비스를 제한 해주는 것이 좋겠다.</p>\n<p>유저 정보 유지해서 계속 불러오는 효율적인 방법은?</p>\n<p>모놀리스에서 함수호출을 이벤트 드리븐이 대체했을 때 고속처리가 가능한가? 배민은 되긴 하나보다</p>\n<ul>\n<li>같은 네트워크에 있다면 rpc로 서비스가 나눠져 있으면 rpc로 데이터를 취합해 api gateway가 모은 데이터를 리턴해주면 된다</li>\n</ul>\n<p>쿠버네티스에서는 RBAC가 어느 순간에 동작하는거지?</p>\n<h4 id=\"library-호출\" style=\"position:relative;\"><a href=\"#library-%ED%98%B8%EC%B6%9C\" aria-label=\"library 호출 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>library 호출</h4>\n<p>마이크로서비스의 library를 한곳에 모아서 보여주고\n쉽게 호출해 쓸 수 있도록 해야한다.\n어떻게?</p>\n<h4 id=\"서비스메시\" style=\"position:relative;\"><a href=\"#%EC%84%9C%EB%B9%84%EC%8A%A4%EB%A9%94%EC%8B%9C\" aria-label=\"서비스메시 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>서비스메시</h4>\n<p>규칙기반의 부하분산으로\n배포(테스트에 배포)와 릴리즈(프로덕션에 배포)를 분리하기 좋다고 한다</p>\n<p>텔레메트리 관리</p>\n<ul>\n<li>네트워크 트래픽 관련 지표 수집 및 추적</li>\n</ul>\n<h4 id=\"soa-msa-ddd\" style=\"position:relative;\"><a href=\"#soa-msa-ddd\" aria-label=\"soa msa ddd permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>SOA, MSA, DDD</h4>\n<p>service oriented architecture</p>\n<ul>\n<li>중간에 enterprise service bus를 둬서 서비스 간 공유를 하려고 했으나, 당시\n시대상 팀 구조가 변화에 재빠르게 대응하지 못했고, MSA와 비슷한 목표를 가졌으나\n성공하지 못했다.</li>\n<li>MSA의 핵심은 통신 처리이고, 이 처리 흐름을 만들어내는 서비스 메시가 등장했다.\n마이크로 서비스는 서비스의 수가 많고, 이를 관리하는 방법이 필요하다</li>\n</ul>\n<h4 id=\"event-driven-architecture\" style=\"position:relative;\"><a href=\"#event-driven-architecture\" aria-label=\"event driven architecture permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>event driven architecture</h4>\n<ul>\n<li>in micro service, each service need send some event.</li>\n<li>if not implement event, can parse some data?</li>\n<li>http server &#x3C;- event producer -> queue\nDB\nlambda</li>\n<li>lambda can assign http or sqs. how to get data?</li>\n</ul>\n<h4 id=\"banksalad-github\" style=\"position:relative;\"><a href=\"#banksalad-github\" aria-label=\"banksalad github permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>banksalad github</h4>\n<ul>\n<li>awesome style이라는 레파지토리로 사내 행동강령을 모아놓았다. awesome</li>\n<li>python template을 만들어 사용하고 있다</li>\n</ul>\n<p>이렇게 회사 내 자료들을 메타적으로 관리하는 레포지토리를 만들어서 관리하면\n좋겠다.\n사내 인적 리소스 관리도 git으로 하면 좋겠다</p>\n<h4 id=\"microservice-experience\" style=\"position:relative;\"><a href=\"#microservice-experience\" aria-label=\"microservice experience permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>microservice experience</h4>\n<ul>\n<li><a href=\"https://www.youtube.com/watch?v=BnS6343GTkY\">배민</a>\n<ul>\n<li>결제 장애 시 결제만 장애나는 환경을 원했다.</li>\n<li>모놀리스 서버 테이블이 700개... >> 분리 후에도 한 서비스에 테이블이 많이\n있을 것</li>\n<li>이벤트 기반으로 하니 훨씬 효율이 증가했다.</li>\n</ul>\n</li>\n<li><a href=\"https://www.youtube.com/watch?v=J-VP0WFEQsY\">11번가</a>\n<ul>\n<li>Spring cloud 이용</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"junk-food\" style=\"position:relative;\"><a href=\"#junk-food\" aria-label=\"junk food permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>junk food</h4>\n<p>넷플릭스가 마이크로서비스를 하면서 느꼈던 개발의 주요 문제점</p>\n<ul>\n<li>dependency\n<ul>\n<li>circuit breaker 로 의존성 있는 서버가 죽는 것에 대응</li>\n</ul>\n</li>\n<li>Scale\n<ul>\n<li>EVCache</li>\n</ul>\n</li>\n<li>Variance</li>\n<li>Change</li>\n</ul>\n<h4 id=\"observability를-높이기-위해서는-어떻게-해야할까\" style=\"position:relative;\"><a href=\"#observability%EB%A5%BC-%EB%86%92%EC%9D%B4%EA%B8%B0-%EC%9C%84%ED%95%B4%EC%84%9C%EB%8A%94-%EC%96%B4%EB%96%BB%EA%B2%8C-%ED%95%B4%EC%95%BC%ED%95%A0%EA%B9%8C\" aria-label=\"observability를 높이기 위해서는 어떻게 해야할까 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Observability를 높이기 위해서는 어떻게 해야할까</h4>\n<p>이 문제가 발생했는지를 내가 설정하지 않아도 알 수 있으려면 바로 observability가 필요하다</p>\n<ul>\n<li>피드백을 받기 위해</li>\n<li>문제가 일어나기 전에 예측하기 위해?</li>\n<li>분산 환경에서 모니터링이 한눈에 되어야 한다</li>\n<li>Metrics, Events, Logs, Traces 를 한눈에 확인한다</li>\n<li>예측하지 못한 문제를 찾으려고 한다</li>\n<li><a href=\"https://ko.wikipedia.org/wiki/%EC%A0%9C%EC%96%B4%EC%9D%B4%EB%A1%A0\">제어이론</a>에서\n**관측 가능성(observability)**이란, 시스템의 **출력 변수(output variable)**를\n사용하여 **상태 변수(state variable)**에 대한 정보를 알아낼 수 있는지를\n나타내는 용어이다. 시스템의 출력 변수를 사용하여 특정 상태 변수에 대한 정보를\n알아낼 수 있을 때 그 상태 변수는 **관측 가능하다(observable)**고 하며,\n시스템의 모든 상태 변수가 관측 가능할 때 그 시스템은 관측 가능하다고 한다.</li>\n<li>메트릭이란? 최적의 네트워크 경로 또는 측정 가능한 단위(평가지표)</li>\n</ul>\n<p>서버를 가상화해서 사용 시 서버는 추상화가 되고 서버의 상태를 일일이 확인할 필요가 없다. 문제가 생기면 없애고 새로 만들면 되기 때문에.</p>\n<p>근데 문제가 생겼는지 확인하려면 기준점이 있어야 하고, 기준이 설정되어 있지 않다면 문제가 발생했는지 알 수 없다</p>\n<p>정상 상태를 정의하고, 비정상 상태로 만든 후 정상 상태로 돌리는 것을 통해\nObservability를 높인다. 이것을 카오스 엔지니어링이라고 한다.</p>\n<p>예측하는 것이 아니라 관찰할 수 있도록 만든 후 관찰 하는 것.</p>\n<ul>\n<li>Observability</li>\n<li>post mortem</li>\n<li>무엇을 보여줄 수 있는가</li>\n<li>무엇을 해결해야 하는가</li>\n<li>어떤 문제가 생길 것 같은가</li>\n</ul>\n<h4 id=\"architecture-process-organization\" style=\"position:relative;\"><a href=\"#architecture-process-organization\" aria-label=\"architecture process organization permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>architecture process organization</h4>\n<p><img src=\"img/triangle.png\" alt=\"triangle\">\n출처: <a href=\"https://kihoonkim.github.io/2018/03/25/Microservices%20Architecture/first-msa-retro/\">https://kihoonkim.github.io/2018/03/25/Microservices%20Architecture/first-msa-retro/</a></p>\n<h4 id=\"when-many-people-come-to-site-how-to-keep-working-server\" style=\"position:relative;\"><a href=\"#when-many-people-come-to-site-how-to-keep-working-server\" aria-label=\"when many people come to site how to keep working server permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>When many people come to site. how to keep working server</h4>\n<ol>\n<li>allow maximum people, others redirect to queue.</li>\n<li>scale out</li>\n</ol>\n<h4 id=\"섀시\" style=\"position:relative;\"><a href=\"#%EC%84%80%EC%8B%9C\" aria-label=\"섀시 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>섀시</h4>\n<p>에러 체크, 로깅, 헬스체크, 회로 차단 등 마이크로서비스에 필요한 것들을 만들어놓은 것을 이용하자는 마이크로서비스 섀시라는 개념이 이미 있었다\ngo-kit, micro 참고</p>\n<ul>\n<li>외부화(엔드포인트 적용)</li>\n<li>헬스체크</li>\n<li>모니터링 지표 뽑기</li>\n<li>서비스 디스커버리</li>\n<li>회로 차단</li>\n<li>분산 추적</li>\n<li>로깅(액션 기록)</li>\n<li>보안</li>\n</ul>\n<p>이 기능들을 메인로직에 적을 필요없이 섀시를 적용시키면 자동으로 기능이 수행된다</p>\n<p>그리고 서비스 메시는 섀시의 진화 형태가 될 것인데, 현재는 일부 기능만 구현하고 있고, 아직 완전 대체제는 아니다\nistio, linkerd</p>\n<p>istio에서 분산 추적을 하려면 app: deployname 을 라벨링 해줘야 한다</p>\n<h4 id=\"마이크로서비스에서-두-서비스에서-불러온-데이터를-어떻게-합칠까\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EC%9D%B4%ED%81%AC%EB%A1%9C%EC%84%9C%EB%B9%84%EC%8A%A4%EC%97%90%EC%84%9C-%EB%91%90-%EC%84%9C%EB%B9%84%EC%8A%A4%EC%97%90%EC%84%9C-%EB%B6%88%EB%9F%AC%EC%98%A8-%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%A5%BC-%EC%96%B4%EB%96%BB%EA%B2%8C-%ED%95%A9%EC%B9%A0%EA%B9%8C\" aria-label=\"마이크로서비스에서 두 서비스에서 불러온 데이터를 어떻게 합칠까 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>마이크로서비스에서 두 서비스에서 불러온 데이터를 어떻게 합칠까</h4>\n<p>두 서비스면 그냥 호출하는데서 부르면 되겠지만\nrdbms에서 하던 조인처럼 자유자재로 하기에는 성능이 안나온다</p>\n<p>CQRS의 쿼리를 이 상황에 쓰던가\n아니면 쿼리를 모아서 rdbms로 모으는 추가적인 리소스를 이용해서 해결?</p>\n<h4 id=\"cqrs\" style=\"position:relative;\"><a href=\"#cqrs\" aria-label=\"cqrs permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CQRS</h4>\n<p>쿼리와 커맨드를 분리했다.\n쿼리는 CRUD의 Read의 개념이고\n커맨드는 나머지 CUD의 개념이다.\nRead를 조합해서 나머지 명령을 하는 경우가 많고,\nRead 작업이 다른 작업과 사용되는 빈도에도 차이가 있기도 하다.\n마이크로 서비스에서 특히 다른 DB에서 가져올 때 조합하기 위해 이렇게 분리하면 좋을 것 같다\n이 개념에서는 애초에 모델, 서비스 자체에서 쿼리와 커맨드를 분리해서 다른 서비스로 만들라고 한다</p>\n<p>사가\n애그리거트\n쿼리\napi</p>\n<p>log data 나 db table 등을\n초기에 설계해서 쭉 써야하는 것보다는\n변경에 유연했으면 좋겠다\n변경에는 근거가 필요하지만, 실제로 변경할때는 쉽게 할 수 있도록\n마이그레이션이 쉽지 않다</p>\n<p>변경에 유연한 것들은 무엇이 있을까</p>\n<p>관리요소가 많아지면 일관성이 깨지기 쉽다\n코드가 많아지면 고쳐야하는 지점이 늘어난다</p>\n<p>마이크로서비스는 내 생활방식과 다르다</p>\n<p>마이크로서비화도 무한정 많이 할게 아니라 탈출지점을 만드는게 좋겠다\n한 팀이 감당할 서비스를 생각해서</p>\n<p>분산 데이터\n분산 서비스\n분산 환경을 컨트롤하는 게 필요하다</p>\n<p>복잡성도 분산 환경에서 있고 분산이 곧 개별적인 인간 세상과 닮은 소프트웨어의 구조</p>\n<p>마이크로서비스의 경계설정\n데이터 쿼리 트랜잭션\n데이터 모아서 처리하기</p>\n<p>마이크로서비스는 데이터가 뿔뿔이 흩어져있다고 느낄 수 있다\n신경써야할 요소가 많아진다고 볼 수 있다\n넷플릭스는 이것을 어떻게 관리하지?</p>\n<p>모놀리스로 개발하다보면 기존에 것에 계속 추가해야하고 수정해야한다.\n새로운 기능이 필요하면 기존 구조를 건드려야 할 수도 있다\n이것을 막기 위해 마이크로서비스를 쓰지만\n관리포인트는 줄일 수 있어야 한다.</p>\n<h4 id=\"마이크로서비스-잘-구축해보고-싶다-이벤트-처리\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EC%9D%B4%ED%81%AC%EB%A1%9C%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%9E%98-%EA%B5%AC%EC%B6%95%ED%95%B4%EB%B3%B4%EA%B3%A0-%EC%8B%B6%EB%8B%A4-%EC%9D%B4%EB%B2%A4%ED%8A%B8-%EC%B2%98%EB%A6%AC\" aria-label=\"마이크로서비스 잘 구축해보고 싶다 이벤트 처리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>마이크로서비스 잘 구축해보고 싶다 (이벤트 처리)</h4>\n<p>카프카 이용하는 마이크로서비스 예제 보고싶다</p>\n<ul>\n<li>github.com/gilbutITbook/007035</li>\n<li>github.com/gilbutITbook/006947</li>\n</ul>","htmlAst":{"type":"root","children":[{"type":"element","tagName":"h1","properties":{"id":"micro-service-architecture","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#micro-service-architecture","ariaLabel":"micro service architecture permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Micro Service Architecture"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"MSA 는 작은 규모에서는 과한 느낌이 있다\n모놀리스로 쉽게 관리가 될 것을 MSA를 사용하면 관리포인트가 엄청 많아진다"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"micro-service","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#micro-service","ariaLabel":"micro service permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"micro service"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"every node make end-point, http, grpc\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"need documentation"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"flexible micro service\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"it can be split and compose"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"logging and visualization"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"마이크로서비스에서 문제가 생긴 지점을 바로 확인할 방법은?"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"마이크로-서비스","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#%EB%A7%88%EC%9D%B4%ED%81%AC%EB%A1%9C-%EC%84%9C%EB%B9%84%EC%8A%A4","ariaLabel":"마이크로 서비스 permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"마이크로 서비스"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"라이브러리를 쓰듯이 다른 서비스들을 사용하면 성능 상의 손해가 있다\n마이크로아키텍처는 관리할 지점이 늘어나는 단점이 있지 않나"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"메시지 기반의 비동기 통신"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"사가 패턴 - 데이터 일관성 유지를 위해"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"도메인 주도 설계"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"이벤트 소싱 패턴"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"API"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"서비스 메시"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"서비스 디스커버리"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"메시지 처리"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"서킷 브레이커"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"API gateway, 서비스 메시, 서비스 디스커버리 차이는?"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"서비스 메시 안에 서비스 디스커버리가 보통 내장되있다"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"api gateway는 외부에서의 접속, 서비스 메시는 내부의 네트워크 관리"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"왜 마이크로 서비스인가"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"마이크로 서비스를 위해서는 필연적으로 서비스 간 커뮤니케이션이 필요하고,\n비동기 통신과 동기 통신을 잘 구분해서 사용해야 한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"동기는 API를 이용해서, 비동기는 메시지 큐를 이용해서."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"각 서비스 간 데이터를 메시지 큐에 발행하고 구독하는 식으로 데이터 공유,\n이벤트 처리가 가능하다."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"마이크로 서비스를 일일이 관리하기 보다 서비스 디스커버리를 이용해서 자유롭게\n생성과 운영이 되게 해야겠다"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"단일고장점이 없도록 노드를 여러 개 두어 관리하는 것이 좋겠다."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"큰 팀을 작은 팀으로 나누면 팀 간 대화에 장벽이 생기고, 안개가 생긴다. 다른\n팀의 영역에는 안들어가려고 하고, 그 쪽에서 일어난 일이 전달이 안될 때가\n많아진다. 어떻게 이 장벽을 없앨 수 있을까"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"핵가족에 이어 1인가구가 늘어남에 따라 대가족일 때는 자연스럽게 알 수 있던\n것들이 이제는 공부를 해야 알 수 있게 되었다."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"수평적인 연결망이 만들어져서 정보공유를 할 수 있게 해야한다. 회사에서 팀장이\n있고 팀장회의를 하는 것과 비슷한 느낌이지만 수평적인 관계의 연결망으로.\n(현재의 커뮤니티가 이 역할을 하고 있는 것일까? Web 2.0)"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"마이크로서비스","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#%EB%A7%88%EC%9D%B4%ED%81%AC%EB%A1%9C%EC%84%9C%EB%B9%84%EC%8A%A4","ariaLabel":"마이크로서비스 permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"마이크로서비스"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"포인트"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"단일 고장 지점을 없앤다"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"의존 영역을 분리한다"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"빠르고 가벼운 사이즈를 유지한다"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"이를 어렵게 하는 요소"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"API endpoint가 많아져서 이를 일일이 관리하기 힘들어 API Gateway라는 것을 이용하려 하는데 이 API gateway가 단일 고장점이 되버린다"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"흩어져 있는 데이터 여러개를 합쳐서 사용해야 할 경우가 있다"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"처음에는 작은 사이즈지만 요구사항이 늘어남에 따라 사이즈는 필연적으로 커진다."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"이에 대한 마이크로서비스의 대응방법"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"sidecar 패턴으로 API gateway를 없애고 각 서비스에 연결점을 붙인다"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"SAGA, CQRS"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"사이즈가 커지면 다시 분리한다."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"미이크로서비스간 데이터 통합과 작업 일관성 유지를 위해 다른 서비스가 필요한데\n이를 커밋과 적용으로 나누는 방식으로 할 수 있고\n사가 패턴을 이용해 해결할 수도 있다"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"쿠버네티스의 구조처럼 마이크로서비스를 구현하면 되지 않을까"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"데이터를 다 분리해놓고 중앙에 모아서 처리하다가 요청이 자주 오간다 싶으면\n연결하는 길을 추가?"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"한 마이크로서비스의 단위를 로직 - 데이터베이스 - 사이드카로 놓고 사용\n이 마이크로서비스를 관리하는 툴을 생각해본다"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"중앙에 데이터들이 하나로 묶인다\n한 마이크로서비스에 요청이 오면 그 응답으로 메시지를 보낸다\n메시지는 중앙, 관리자에게 전달되고, 관리자는 피드백으로 중앙에는 업데이트로\n이용된다"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"한 부분의 변화를 위해 다른 부분을 신경 쓰지 않아야 한다.\n한 부분의 변화가 다른 부분에 영향을 주지 않아야 한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"kubernetes로 여러개의 서비스로 쪼개면 microservice인가?\nmicro로 서비스를 만들면 microservice인가?\nmonolith와 구분되는 microservice의 특징은 각 서비스가 개별 데이터베이스를 갖는\n것인데, micro는 어떤 구성 방식인가"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"어차피 한 사람이 모든 마이크로서비스를 관리할 수 없다?\n그래서 모놀리스에서 서로 엮여있던 것을 마이크로화해서 편하게 관리할 수 있게\n하는거지 마이크로서비스를 무한정 많이 만드는 것이 목적은 아닐 것이다.\n한 사람이 다루는 서비스를 제한 해주는 것이 좋겠다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"유저 정보 유지해서 계속 불러오는 효율적인 방법은?"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"모놀리스에서 함수호출을 이벤트 드리븐이 대체했을 때 고속처리가 가능한가? 배민은 되긴 하나보다"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"같은 네트워크에 있다면 rpc로 서비스가 나눠져 있으면 rpc로 데이터를 취합해 api gateway가 모은 데이터를 리턴해주면 된다"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"쿠버네티스에서는 RBAC가 어느 순간에 동작하는거지?"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"library-호출","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#library-%ED%98%B8%EC%B6%9C","ariaLabel":"library 호출 permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"library 호출"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"마이크로서비스의 library를 한곳에 모아서 보여주고\n쉽게 호출해 쓸 수 있도록 해야한다.\n어떻게?"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"서비스메시","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#%EC%84%9C%EB%B9%84%EC%8A%A4%EB%A9%94%EC%8B%9C","ariaLabel":"서비스메시 permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"서비스메시"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"규칙기반의 부하분산으로\n배포(테스트에 배포)와 릴리즈(프로덕션에 배포)를 분리하기 좋다고 한다"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"텔레메트리 관리"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"네트워크 트래픽 관련 지표 수집 및 추적"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"soa-msa-ddd","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#soa-msa-ddd","ariaLabel":"soa msa ddd permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"SOA, MSA, DDD"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"service oriented architecture"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"중간에 enterprise service bus를 둬서 서비스 간 공유를 하려고 했으나, 당시\n시대상 팀 구조가 변화에 재빠르게 대응하지 못했고, MSA와 비슷한 목표를 가졌으나\n성공하지 못했다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"MSA의 핵심은 통신 처리이고, 이 처리 흐름을 만들어내는 서비스 메시가 등장했다.\n마이크로 서비스는 서비스의 수가 많고, 이를 관리하는 방법이 필요하다"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"event-driven-architecture","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#event-driven-architecture","ariaLabel":"event driven architecture permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"event driven architecture"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"in micro service, each service need send some event."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"if not implement event, can parse some data?"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"http server <- event producer -> queue\nDB\nlambda"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"lambda can assign http or sqs. how to get data?"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"banksalad-github","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#banksalad-github","ariaLabel":"banksalad github permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"banksalad github"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"awesome style이라는 레파지토리로 사내 행동강령을 모아놓았다. awesome"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"python template을 만들어 사용하고 있다"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"이렇게 회사 내 자료들을 메타적으로 관리하는 레포지토리를 만들어서 관리하면\n좋겠다.\n사내 인적 리소스 관리도 git으로 하면 좋겠다"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"microservice-experience","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#microservice-experience","ariaLabel":"microservice experience permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"microservice experience"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://www.youtube.com/watch?v=BnS6343GTkY"},"children":[{"type":"text","value":"배민"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"결제 장애 시 결제만 장애나는 환경을 원했다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"모놀리스 서버 테이블이 700개... >> 분리 후에도 한 서비스에 테이블이 많이\n있을 것"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"이벤트 기반으로 하니 훨씬 효율이 증가했다."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://www.youtube.com/watch?v=J-VP0WFEQsY"},"children":[{"type":"text","value":"11번가"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Spring cloud 이용"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"junk-food","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#junk-food","ariaLabel":"junk food permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"junk food"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"넷플릭스가 마이크로서비스를 하면서 느꼈던 개발의 주요 문제점"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"dependency\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"circuit breaker 로 의존성 있는 서버가 죽는 것에 대응"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Scale\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"EVCache"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Variance"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Change"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"observability를-높이기-위해서는-어떻게-해야할까","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#observability%EB%A5%BC-%EB%86%92%EC%9D%B4%EA%B8%B0-%EC%9C%84%ED%95%B4%EC%84%9C%EB%8A%94-%EC%96%B4%EB%96%BB%EA%B2%8C-%ED%95%B4%EC%95%BC%ED%95%A0%EA%B9%8C","ariaLabel":"observability를 높이기 위해서는 어떻게 해야할까 permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Observability를 높이기 위해서는 어떻게 해야할까"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"이 문제가 발생했는지를 내가 설정하지 않아도 알 수 있으려면 바로 observability가 필요하다"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"피드백을 받기 위해"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"문제가 일어나기 전에 예측하기 위해?"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"분산 환경에서 모니터링이 한눈에 되어야 한다"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Metrics, Events, Logs, Traces 를 한눈에 확인한다"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"예측하지 못한 문제를 찾으려고 한다"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://ko.wikipedia.org/wiki/%EC%A0%9C%EC%96%B4%EC%9D%B4%EB%A1%A0"},"children":[{"type":"text","value":"제어이론"}]},{"type":"text","value":"에서\n**관측 가능성(observability)**이란, 시스템의 **출력 변수(output variable)**를\n사용하여 **상태 변수(state variable)**에 대한 정보를 알아낼 수 있는지를\n나타내는 용어이다. 시스템의 출력 변수를 사용하여 특정 상태 변수에 대한 정보를\n알아낼 수 있을 때 그 상태 변수는 **관측 가능하다(observable)**고 하며,\n시스템의 모든 상태 변수가 관측 가능할 때 그 시스템은 관측 가능하다고 한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"메트릭이란? 최적의 네트워크 경로 또는 측정 가능한 단위(평가지표)"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"서버를 가상화해서 사용 시 서버는 추상화가 되고 서버의 상태를 일일이 확인할 필요가 없다. 문제가 생기면 없애고 새로 만들면 되기 때문에."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"근데 문제가 생겼는지 확인하려면 기준점이 있어야 하고, 기준이 설정되어 있지 않다면 문제가 발생했는지 알 수 없다"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"정상 상태를 정의하고, 비정상 상태로 만든 후 정상 상태로 돌리는 것을 통해\nObservability를 높인다. 이것을 카오스 엔지니어링이라고 한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"예측하는 것이 아니라 관찰할 수 있도록 만든 후 관찰 하는 것."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Observability"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"post mortem"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"무엇을 보여줄 수 있는가"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"무엇을 해결해야 하는가"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"어떤 문제가 생길 것 같은가"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"architecture-process-organization","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#architecture-process-organization","ariaLabel":"architecture process organization permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"architecture process organization"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"img","properties":{"src":"img/triangle.png","alt":"triangle"},"children":[]},{"type":"text","value":"\n출처: "},{"type":"element","tagName":"a","properties":{"href":"https://kihoonkim.github.io/2018/03/25/Microservices%20Architecture/first-msa-retro/"},"children":[{"type":"text","value":"https://kihoonkim.github.io/2018/03/25/Microservices%20Architecture/first-msa-retro/"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"when-many-people-come-to-site-how-to-keep-working-server","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#when-many-people-come-to-site-how-to-keep-working-server","ariaLabel":"when many people come to site how to keep working server permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"When many people come to site. how to keep working server"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ol","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"allow maximum people, others redirect to queue."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"scale out"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"섀시","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#%EC%84%80%EC%8B%9C","ariaLabel":"섀시 permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"섀시"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"에러 체크, 로깅, 헬스체크, 회로 차단 등 마이크로서비스에 필요한 것들을 만들어놓은 것을 이용하자는 마이크로서비스 섀시라는 개념이 이미 있었다\ngo-kit, micro 참고"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"외부화(엔드포인트 적용)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"헬스체크"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"모니터링 지표 뽑기"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"서비스 디스커버리"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"회로 차단"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"분산 추적"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"로깅(액션 기록)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"보안"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"이 기능들을 메인로직에 적을 필요없이 섀시를 적용시키면 자동으로 기능이 수행된다"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"그리고 서비스 메시는 섀시의 진화 형태가 될 것인데, 현재는 일부 기능만 구현하고 있고, 아직 완전 대체제는 아니다\nistio, linkerd"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"istio에서 분산 추적을 하려면 app: deployname 을 라벨링 해줘야 한다"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"마이크로서비스에서-두-서비스에서-불러온-데이터를-어떻게-합칠까","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#%EB%A7%88%EC%9D%B4%ED%81%AC%EB%A1%9C%EC%84%9C%EB%B9%84%EC%8A%A4%EC%97%90%EC%84%9C-%EB%91%90-%EC%84%9C%EB%B9%84%EC%8A%A4%EC%97%90%EC%84%9C-%EB%B6%88%EB%9F%AC%EC%98%A8-%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%A5%BC-%EC%96%B4%EB%96%BB%EA%B2%8C-%ED%95%A9%EC%B9%A0%EA%B9%8C","ariaLabel":"마이크로서비스에서 두 서비스에서 불러온 데이터를 어떻게 합칠까 permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"마이크로서비스에서 두 서비스에서 불러온 데이터를 어떻게 합칠까"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"두 서비스면 그냥 호출하는데서 부르면 되겠지만\nrdbms에서 하던 조인처럼 자유자재로 하기에는 성능이 안나온다"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"CQRS의 쿼리를 이 상황에 쓰던가\n아니면 쿼리를 모아서 rdbms로 모으는 추가적인 리소스를 이용해서 해결?"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"cqrs","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#cqrs","ariaLabel":"cqrs permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"CQRS"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"쿼리와 커맨드를 분리했다.\n쿼리는 CRUD의 Read의 개념이고\n커맨드는 나머지 CUD의 개념이다.\nRead를 조합해서 나머지 명령을 하는 경우가 많고,\nRead 작업이 다른 작업과 사용되는 빈도에도 차이가 있기도 하다.\n마이크로 서비스에서 특히 다른 DB에서 가져올 때 조합하기 위해 이렇게 분리하면 좋을 것 같다\n이 개념에서는 애초에 모델, 서비스 자체에서 쿼리와 커맨드를 분리해서 다른 서비스로 만들라고 한다"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"사가\n애그리거트\n쿼리\napi"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"log data 나 db table 등을\n초기에 설계해서 쭉 써야하는 것보다는\n변경에 유연했으면 좋겠다\n변경에는 근거가 필요하지만, 실제로 변경할때는 쉽게 할 수 있도록\n마이그레이션이 쉽지 않다"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"변경에 유연한 것들은 무엇이 있을까"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"관리요소가 많아지면 일관성이 깨지기 쉽다\n코드가 많아지면 고쳐야하는 지점이 늘어난다"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"마이크로서비스는 내 생활방식과 다르다"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"마이크로서비화도 무한정 많이 할게 아니라 탈출지점을 만드는게 좋겠다\n한 팀이 감당할 서비스를 생각해서"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"분산 데이터\n분산 서비스\n분산 환경을 컨트롤하는 게 필요하다"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"복잡성도 분산 환경에서 있고 분산이 곧 개별적인 인간 세상과 닮은 소프트웨어의 구조"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"마이크로서비스의 경계설정\n데이터 쿼리 트랜잭션\n데이터 모아서 처리하기"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"마이크로서비스는 데이터가 뿔뿔이 흩어져있다고 느낄 수 있다\n신경써야할 요소가 많아진다고 볼 수 있다\n넷플릭스는 이것을 어떻게 관리하지?"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"모놀리스로 개발하다보면 기존에 것에 계속 추가해야하고 수정해야한다.\n새로운 기능이 필요하면 기존 구조를 건드려야 할 수도 있다\n이것을 막기 위해 마이크로서비스를 쓰지만\n관리포인트는 줄일 수 있어야 한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"마이크로서비스-잘-구축해보고-싶다-이벤트-처리","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#%EB%A7%88%EC%9D%B4%ED%81%AC%EB%A1%9C%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%9E%98-%EA%B5%AC%EC%B6%95%ED%95%B4%EB%B3%B4%EA%B3%A0-%EC%8B%B6%EB%8B%A4-%EC%9D%B4%EB%B2%A4%ED%8A%B8-%EC%B2%98%EB%A6%AC","ariaLabel":"마이크로서비스 잘 구축해보고 싶다 이벤트 처리 permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"마이크로서비스 잘 구축해보고 싶다 (이벤트 처리)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"카프카 이용하는 마이크로서비스 예제 보고싶다"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"github.com/gilbutITbook/007035"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"github.com/gilbutITbook/006947"}]},{"type":"text","value":"\n"}]}],"data":{"quirksMode":false}},"rawMarkdownBody":"\n# Micro Service Architecture\n\nMSA 는 작은 규모에서는 과한 느낌이 있다\n모놀리스로 쉽게 관리가 될 것을 MSA를 사용하면 관리포인트가 엄청 많아진다\n\n## micro service\n- every node make end-point, http, grpc\n    - need documentation\n- flexible micro service\n    - it can be split and compose\n- logging and visualization\n- 마이크로서비스에서 문제가 생긴 지점을 바로 확인할 방법은?\n\n#### 마이크로 서비스\n라이브러리를 쓰듯이 다른 서비스들을 사용하면 성능 상의 손해가 있다\n마이크로아키텍처는 관리할 지점이 늘어나는 단점이 있지 않나\n\n- 메시지 기반의 비동기 통신\n- 사가 패턴 - 데이터 일관성 유지를 위해\n- 도메인 주도 설계\n- 이벤트 소싱 패턴\n\n- API\n- 서비스 메시\n- 서비스 디스커버리\n- 메시지 처리\n- 서킷 브레이커\n\n- API gateway, 서비스 메시, 서비스 디스커버리 차이는?\n  - 서비스 메시 안에 서비스 디스커버리가 보통 내장되있다\n  - api gateway는 외부에서의 접속, 서비스 메시는 내부의 네트워크 관리\n\n왜 마이크로 서비스인가\n- 마이크로 서비스를 위해서는 필연적으로 서비스 간 커뮤니케이션이 필요하고,\n  비동기 통신과 동기 통신을 잘 구분해서 사용해야 한다.\n  - 동기는 API를 이용해서, 비동기는 메시지 큐를 이용해서.\n  - 각 서비스 간 데이터를 메시지 큐에 발행하고 구독하는 식으로 데이터 공유,\n    이벤트 처리가 가능하다.\n- 마이크로 서비스를 일일이 관리하기 보다 서비스 디스커버리를 이용해서 자유롭게\n  생성과 운영이 되게 해야겠다\n- 단일고장점이 없도록 노드를 여러 개 두어 관리하는 것이 좋겠다.\n\n- 큰 팀을 작은 팀으로 나누면 팀 간 대화에 장벽이 생기고, 안개가 생긴다. 다른\n  팀의 영역에는 안들어가려고 하고, 그 쪽에서 일어난 일이 전달이 안될 때가\n  많아진다. 어떻게 이 장벽을 없앨 수 있을까\n- 핵가족에 이어 1인가구가 늘어남에 따라 대가족일 때는 자연스럽게 알 수 있던\n  것들이 이제는 공부를 해야 알 수 있게 되었다.\n- 수평적인 연결망이 만들어져서 정보공유를 할 수 있게 해야한다. 회사에서 팀장이\n  있고 팀장회의를 하는 것과 비슷한 느낌이지만 수평적인 관계의 연결망으로.\n  (현재의 커뮤니티가 이 역할을 하고 있는 것일까? Web 2.0)\n\n#### 마이크로서비스\n포인트\n- 단일 고장 지점을 없앤다\n- 의존 영역을 분리한다\n- 빠르고 가벼운 사이즈를 유지한다\n\n이를 어렵게 하는 요소\n- API endpoint가 많아져서 이를 일일이 관리하기 힘들어 API Gateway라는 것을 이용하려 하는데 이 API gateway가 단일 고장점이 되버린다\n- 흩어져 있는 데이터 여러개를 합쳐서 사용해야 할 경우가 있다\n- 처음에는 작은 사이즈지만 요구사항이 늘어남에 따라 사이즈는 필연적으로 커진다.\n\n이에 대한 마이크로서비스의 대응방법\n- sidecar 패턴으로 API gateway를 없애고 각 서비스에 연결점을 붙인다\n- SAGA, CQRS\n- 사이즈가 커지면 다시 분리한다.\n\n미이크로서비스간 데이터 통합과 작업 일관성 유지를 위해 다른 서비스가 필요한데\n이를 커밋과 적용으로 나누는 방식으로 할 수 있고\n사가 패턴을 이용해 해결할 수도 있다\n\n쿠버네티스의 구조처럼 마이크로서비스를 구현하면 되지 않을까\n\n데이터를 다 분리해놓고 중앙에 모아서 처리하다가 요청이 자주 오간다 싶으면\n연결하는 길을 추가?\n\n한 마이크로서비스의 단위를 로직 - 데이터베이스 - 사이드카로 놓고 사용\n이 마이크로서비스를 관리하는 툴을 생각해본다\n\n중앙에 데이터들이 하나로 묶인다\n한 마이크로서비스에 요청이 오면 그 응답으로 메시지를 보낸다\n메시지는 중앙, 관리자에게 전달되고, 관리자는 피드백으로 중앙에는 업데이트로\n이용된다\n\n한 부분의 변화를 위해 다른 부분을 신경 쓰지 않아야 한다.\n한 부분의 변화가 다른 부분에 영향을 주지 않아야 한다.\n\nkubernetes로 여러개의 서비스로 쪼개면 microservice인가?\nmicro로 서비스를 만들면 microservice인가?\nmonolith와 구분되는 microservice의 특징은 각 서비스가 개별 데이터베이스를 갖는\n것인데, micro는 어떤 구성 방식인가\n\n어차피 한 사람이 모든 마이크로서비스를 관리할 수 없다?\n그래서 모놀리스에서 서로 엮여있던 것을 마이크로화해서 편하게 관리할 수 있게\n하는거지 마이크로서비스를 무한정 많이 만드는 것이 목적은 아닐 것이다.\n한 사람이 다루는 서비스를 제한 해주는 것이 좋겠다.\n\n유저 정보 유지해서 계속 불러오는 효율적인 방법은?\n\n모놀리스에서 함수호출을 이벤트 드리븐이 대체했을 때 고속처리가 가능한가? 배민은 되긴 하나보다\n- 같은 네트워크에 있다면 rpc로 서비스가 나눠져 있으면 rpc로 데이터를 취합해 api gateway가 모은 데이터를 리턴해주면 된다\n\n쿠버네티스에서는 RBAC가 어느 순간에 동작하는거지?\n\n#### library 호출\n마이크로서비스의 library를 한곳에 모아서 보여주고\n쉽게 호출해 쓸 수 있도록 해야한다.\n어떻게?\n\n#### 서비스메시\n규칙기반의 부하분산으로\n배포(테스트에 배포)와 릴리즈(프로덕션에 배포)를 분리하기 좋다고 한다\n\n텔레메트리 관리\n- 네트워크 트래픽 관련 지표 수집 및 추적\n\n#### SOA, MSA, DDD\nservice oriented architecture\n- 중간에 enterprise service bus를 둬서 서비스 간 공유를 하려고 했으나, 당시\n  시대상 팀 구조가 변화에 재빠르게 대응하지 못했고, MSA와 비슷한 목표를 가졌으나\n  성공하지 못했다.\n- MSA의 핵심은 통신 처리이고, 이 처리 흐름을 만들어내는 서비스 메시가 등장했다.\n  마이크로 서비스는 서비스의 수가 많고, 이를 관리하는 방법이 필요하다\n\n#### event driven architecture\n- in micro service, each service need send some event.\n- if not implement event, can parse some data?\n- http server <- event producer -> queue\n  DB\n  lambda\n- lambda can assign http or sqs. how to get data?\n\n#### banksalad github\n- awesome style이라는 레파지토리로 사내 행동강령을 모아놓았다. awesome\n- python template을 만들어 사용하고 있다\n\n이렇게 회사 내 자료들을 메타적으로 관리하는 레포지토리를 만들어서 관리하면\n좋겠다.\n사내 인적 리소스 관리도 git으로 하면 좋겠다\n\n#### microservice experience\n- [배민](https://www.youtube.com/watch?v=BnS6343GTkY)\n    - 결제 장애 시 결제만 장애나는 환경을 원했다.\n    - 모놀리스 서버 테이블이 700개... >> 분리 후에도 한 서비스에 테이블이 많이\n      있을 것\n    - 이벤트 기반으로 하니 훨씬 효율이 증가했다.\n- [11번가](https://www.youtube.com/watch?v=J-VP0WFEQsY)\n    - Spring cloud 이용\n\n#### junk food\n넷플릭스가 마이크로서비스를 하면서 느꼈던 개발의 주요 문제점\n- dependency\n  - circuit breaker 로 의존성 있는 서버가 죽는 것에 대응\n- Scale\n  - EVCache\n- Variance\n- Change\n\n#### Observability를 높이기 위해서는 어떻게 해야할까\n이 문제가 발생했는지를 내가 설정하지 않아도 알 수 있으려면 바로 observability가 필요하다\n- 피드백을 받기 위해\n- 문제가 일어나기 전에 예측하기 위해?\n- 분산 환경에서 모니터링이 한눈에 되어야 한다\n- Metrics, Events, Logs, Traces 를 한눈에 확인한다\n- 예측하지 못한 문제를 찾으려고 한다\n- [제어이론](https://ko.wikipedia.org/wiki/제어이론)에서\n  **관측 가능성(observability)**이란, 시스템의 **출력 변수(output variable)**를\n  사용하여 **상태 변수(state variable)**에 대한 정보를 알아낼 수 있는지를\n  나타내는 용어이다. 시스템의 출력 변수를 사용하여 특정 상태 변수에 대한 정보를\n  알아낼 수 있을 때 그 상태 변수는 **관측 가능하다(observable)**고 하며,\n  시스템의 모든 상태 변수가 관측 가능할 때 그 시스템은 관측 가능하다고 한다.\n- 메트릭이란? 최적의 네트워크 경로 또는 측정 가능한 단위(평가지표)\n\n서버를 가상화해서 사용 시 서버는 추상화가 되고 서버의 상태를 일일이 확인할 필요가 없다. 문제가 생기면 없애고 새로 만들면 되기 때문에.\n\n근데 문제가 생겼는지 확인하려면 기준점이 있어야 하고, 기준이 설정되어 있지 않다면 문제가 발생했는지 알 수 없다\n\n정상 상태를 정의하고, 비정상 상태로 만든 후 정상 상태로 돌리는 것을 통해\nObservability를 높인다. 이것을 카오스 엔지니어링이라고 한다.\n\n예측하는 것이 아니라 관찰할 수 있도록 만든 후 관찰 하는 것.\n\n- Observability\n- post mortem\n- 무엇을 보여줄 수 있는가\n- 무엇을 해결해야 하는가\n- 어떤 문제가 생길 것 같은가\n\n#### architecture process organization\n![triangle](img/triangle.png)\n출처: https://kihoonkim.github.io/2018/03/25/Microservices%20Architecture/first-msa-retro/\n\n#### When many people come to site. how to keep working server\n1. allow maximum people, others redirect to queue.\n2. scale out\n\n#### 섀시\n에러 체크, 로깅, 헬스체크, 회로 차단 등 마이크로서비스에 필요한 것들을 만들어놓은 것을 이용하자는 마이크로서비스 섀시라는 개념이 이미 있었다\ngo-kit, micro 참고\n- 외부화(엔드포인트 적용)\n- 헬스체크\n- 모니터링 지표 뽑기\n- 서비스 디스커버리\n- 회로 차단\n- 분산 추적\n- 로깅(액션 기록)\n- 보안\n이 기능들을 메인로직에 적을 필요없이 섀시를 적용시키면 자동으로 기능이 수행된다\n\n그리고 서비스 메시는 섀시의 진화 형태가 될 것인데, 현재는 일부 기능만 구현하고 있고, 아직 완전 대체제는 아니다\nistio, linkerd\n\nistio에서 분산 추적을 하려면 app: deployname 을 라벨링 해줘야 한다\n\n#### 마이크로서비스에서 두 서비스에서 불러온 데이터를 어떻게 합칠까\n두 서비스면 그냥 호출하는데서 부르면 되겠지만\nrdbms에서 하던 조인처럼 자유자재로 하기에는 성능이 안나온다\n\nCQRS의 쿼리를 이 상황에 쓰던가\n아니면 쿼리를 모아서 rdbms로 모으는 추가적인 리소스를 이용해서 해결?\n\n#### CQRS\n쿼리와 커맨드를 분리했다.\n쿼리는 CRUD의 Read의 개념이고\n커맨드는 나머지 CUD의 개념이다.\nRead를 조합해서 나머지 명령을 하는 경우가 많고,\nRead 작업이 다른 작업과 사용되는 빈도에도 차이가 있기도 하다.\n마이크로 서비스에서 특히 다른 DB에서 가져올 때 조합하기 위해 이렇게 분리하면 좋을 것 같다\n이 개념에서는 애초에 모델, 서비스 자체에서 쿼리와 커맨드를 분리해서 다른 서비스로 만들라고 한다\n\n사가\n애그리거트\n쿼리\napi\n\nlog data 나 db table 등을\n초기에 설계해서 쭉 써야하는 것보다는\n변경에 유연했으면 좋겠다\n변경에는 근거가 필요하지만, 실제로 변경할때는 쉽게 할 수 있도록\n마이그레이션이 쉽지 않다\n\n변경에 유연한 것들은 무엇이 있을까\n\n\n관리요소가 많아지면 일관성이 깨지기 쉽다\n코드가 많아지면 고쳐야하는 지점이 늘어난다\n\n마이크로서비스는 내 생활방식과 다르다\n\n마이크로서비화도 무한정 많이 할게 아니라 탈출지점을 만드는게 좋겠다\n한 팀이 감당할 서비스를 생각해서\n\n\n분산 데이터\n분산 서비스\n분산 환경을 컨트롤하는 게 필요하다\n\n복잡성도 분산 환경에서 있고 분산이 곧 개별적인 인간 세상과 닮은 소프트웨어의 구조\n\n\n마이크로서비스의 경계설정\n데이터 쿼리 트랜잭션\n데이터 모아서 처리하기\n\n마이크로서비스는 데이터가 뿔뿔이 흩어져있다고 느낄 수 있다\n신경써야할 요소가 많아진다고 볼 수 있다\n넷플릭스는 이것을 어떻게 관리하지?\n\n모놀리스로 개발하다보면 기존에 것에 계속 추가해야하고 수정해야한다.\n새로운 기능이 필요하면 기존 구조를 건드려야 할 수도 있다\n이것을 막기 위해 마이크로서비스를 쓰지만\n관리포인트는 줄일 수 있어야 한다.\n\n#### 마이크로서비스 잘 구축해보고 싶다 (이벤트 처리)\n카프카 이용하는 마이크로서비스 예제 보고싶다\n- github.com/gilbutITbook/007035\n- github.com/gilbutITbook/006947\n","frontmatter":{"title":null,"summary":null,"date":"2021, 12 04","updated":"2021, 12 04","tags":null,"parent":[["About_Architecture"]]},"tableOfContents":"<ul>\n<li>\n<p><a href=\"#micro-service-architecture\">Micro Service Architecture</a></p>\n<ul>\n<li>\n<p><a href=\"#micro-service\">micro service</a></p>\n<ul>\n<li>\n<ul>\n<li><a href=\"#%EB%A7%88%EC%9D%B4%ED%81%AC%EB%A1%9C-%EC%84%9C%EB%B9%84%EC%8A%A4\">마이크로 서비스</a></li>\n<li><a href=\"#%EB%A7%88%EC%9D%B4%ED%81%AC%EB%A1%9C%EC%84%9C%EB%B9%84%EC%8A%A4\">마이크로서비스</a></li>\n<li><a href=\"#library-%ED%98%B8%EC%B6%9C\">library 호출</a></li>\n<li><a href=\"#%EC%84%9C%EB%B9%84%EC%8A%A4%EB%A9%94%EC%8B%9C\">서비스메시</a></li>\n<li><a href=\"#soa-msa-ddd\">SOA, MSA, DDD</a></li>\n<li><a href=\"#event-driven-architecture\">event driven architecture</a></li>\n<li><a href=\"#banksalad-github\">banksalad github</a></li>\n<li><a href=\"#microservice-experience\">microservice experience</a></li>\n<li><a href=\"#junk-food\">junk food</a></li>\n<li><a href=\"#observability%EB%A5%BC-%EB%86%92%EC%9D%B4%EA%B8%B0-%EC%9C%84%ED%95%B4%EC%84%9C%EB%8A%94-%EC%96%B4%EB%96%BB%EA%B2%8C-%ED%95%B4%EC%95%BC%ED%95%A0%EA%B9%8C\">Observability를 높이기 위해서는 어떻게 해야할까</a></li>\n<li><a href=\"#architecture-process-organization\">architecture process organization</a></li>\n<li><a href=\"#when-many-people-come-to-site-how-to-keep-working-server\">When many people come to site. how to keep working server</a></li>\n<li><a href=\"#%EC%84%80%EC%8B%9C\">섀시</a></li>\n<li><a href=\"#%EB%A7%88%EC%9D%B4%ED%81%AC%EB%A1%9C%EC%84%9C%EB%B9%84%EC%8A%A4%EC%97%90%EC%84%9C-%EB%91%90-%EC%84%9C%EB%B9%84%EC%8A%A4%EC%97%90%EC%84%9C-%EB%B6%88%EB%9F%AC%EC%98%A8-%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%A5%BC-%EC%96%B4%EB%96%BB%EA%B2%8C-%ED%95%A9%EC%B9%A0%EA%B9%8C\">마이크로서비스에서 두 서비스에서 불러온 데이터를 어떻게 합칠까</a></li>\n<li><a href=\"#cqrs\">CQRS</a></li>\n<li><a href=\"#%EB%A7%88%EC%9D%B4%ED%81%AC%EB%A1%9C%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%9E%98-%EA%B5%AC%EC%B6%95%ED%95%B4%EB%B3%B4%EA%B3%A0-%EC%8B%B6%EB%8B%A4-%EC%9D%B4%EB%B2%A4%ED%8A%B8-%EC%B2%98%EB%A6%AC\">마이크로서비스 잘 구축해보고 싶다 (이벤트 처리)</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>"}},"pageContext":{"slug":"/msa/","previous":{"fields":{"slug":"/people/"},"frontmatter":{"title":null,"tags":null}},"next":{"fields":{"slug":"/devops/"},"frontmatter":{"title":null,"tags":"deep_knowledge"}}}},"staticQueryHashes":["3000541721","4165914708","488914979"],"slicesMap":{}}